<html>
    <head>
        <title>User Sign Up</title>
        <meta name = "viewport" content = "width = device-width, initial-scale = 1">      
        <link rel = "stylesheet" href = "https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel = "stylesheet" href = "https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/css/materialize.min.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"`></script>         
        <script src = "https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js">
        </script>
        <style>
            .center{
                position: relative;
                left: 50%;
                transform: translateX(-50%);
            } 
html {
    font-family: 'Lucida Sans','Verdana';

  }       
  body {
      background-image: url(login.jpg);
      background-repeat: no-repeat;
  } 
        </style>
    </head>
    <body>
        <script>
            $(document).ready(function(){
                $("#signup").click(function(){
                    let name=$("#name").val();
                    let username=$("#username").val();
                    let password=$("#password").val();
                    let email=$("#email").val();
                    let choice=$("#check")[0].checked;
                    let choice1;
                    if(choice==true)
                        choice1='y';
                    else
                        choice1='n';

                    let fd = new FormData();
                    fd.append("name", name);
                    fd.append("username", username);
                    fd.append("password", password);
                    fd.append("email", email);
                    fd.append("choice1", choice1);
                    fd.append("dp", $("#dp")[0].files[0]);

                    $.ajax({
                        url: "http://localhost:8080/api/signup",
                        method: "POST",
                        processData: false,
                        contentType: false,
                        dataType: "json",
                        data: fd,
                        success: (data) => {
                            if (data.success) {
                                Materialize.toast("User successfully registered!",3000,"rounded");
                                setTimeout(() => {
                                    window.location="user.html";
                                }, 2000);
                            }
                            else
                                Materialize.toast(data.message, 3000, "rounded");
                        }
                    });
                });
            });
        </script>
        <nav>
            <div class="nav-wrapper brown darken-2">
            <a href="#" class="brand-logo center">User Sign Up</a>
            <a href="restaurant.html"><i class="material-icons">arrow_back</i></a>
            </div>
        </nav>
        <br>
        <br>
        <div class="row">
        <div class="col s6 center">   
        <div class="card-panel z-depth-5" style="height:800px">
        <img src="logo.jpg" class="circle" width="75" height="75" style="border:2px solid #420707" align="center">    
        <h5 class="brown-text text-darken-2" align="center">USER SIGN UP</h5>
        <p class="brown-text text-darken-2" align="center">Please fill in the details to sign up.</p>        
        <div class="row">
        <form class="col s12">
            <div class="input-field col s10 center">
                <input id="name" type="text" class="validate" required>
                <label for="name">Enter your name</label>
            </div>
        </form>
        </div> 
        <div class="row" style="padding-top:-10px">
            <form class="col s12">
                <div class="input-field col s10 center">
                    <input id="username" type="text" class="validate" required>
                    <label for="username">Enter the username</label>
                </div>
        </form>
        </div> 
        <div class="row" style="padding-top:-20px">
        <form class="col s12">   
            <div class="input-field col s10 center">
                <input id="password" type="password" class="validate" required>
                <label for="password">Enter the password</label>
            </div>
        </form>
        </div>
        <div class="row" style="padding-top:-20px">
            <form class="col s12">   
                <div class="input-field col s10 center">
                    <input id="email" type="email" class="validate" required>
                    <label for="email" data-error="wrong" data-success="right">Enter the email </label>
                </div>
            </form>
        </div>
        <div class="row">
            <input id="dp" type="file" accept="image/*" />
            <label for="dp">Choose a profile picture</label>
        </div>
        <div class="row"  align="center">
            <form>
                  <input type="checkbox" style="all: initial;" id="check" checked="checked"/>
                  <label for="check">Subscribe to updates</label>
            </form>
            </div>
        <div class="row">
            <div class="col s11 offset-m4">
                <a class = "waves-effect brown darken-2 btn" id="signup">Sign Up</a>
        </div>
        </div>
        </div>
        </div>    
        </div>
    </body> 
</html>